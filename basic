#!/usr/bin/bash -i

MEGABYTE=1024

freemem () {
local intermediateValue
local returnValue
intermediateValue=$(awk 'FNR == 2{print $2}' /proc/meminfo)
returnValue=$((intermediateValue / MEGABYTE))
echo "The amount of free memory available is: $returnValue megabytes." 
 }

diskfree () {
local returnValue
returnValue=$(df -h 2>/dev/null | awk  '{print $1"\t\t" $4"\t"}' | column -t)
echo "$returnValue" | more
}

quotacheck () {
local returnValue
returnValue=$(quota 2>/dev/null)
echo "$returnValue"
}

groupscheck () {
local returnValue
returnValue=$(groups)
echo "$returnValue"
}

historycheck () {
local returnValue
returnValue=$(history)
echo "$returnValue" | less
}

if [[ $# -eq 0 || $# -gt 1 ]]; then
        echo 'Error: the script requires exactly ONE argument.'
        exit 0
fi

SELECTED_OPTION=$1

case $SELECTED_OPTION in
        "freemem") freemem;;
        "diskfree") diskfree;;
        "quota") quotacheck;;
        "groups") groupscheck;;
        "history") historycheck;;
esac
